<!DOCTYPE html>

<html lang="zh-CN">
<head>
<title>去掉父试图添加点击监听之后的大焦点</title>
<link rel="stylesheet" href="../style.css" />
<meta charset="utf-8">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.zclip.min.js"></script>
<script type="text/javascript">
$(function(){ 
    $('#copy_input1').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code1').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 
$(function(){ 
    $('#copy_input2').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code2').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 

$(function(){ 
    $('#copy_input3').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code3').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 

$(function(){ 
    $('#copy_input4').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code4').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 

</script>
</head>
<body>
<div class="wrap">
<!-- header begin -->
<div class="header">
    <div ><a href="http://www.siaa.org.cn/"><img src="../logo.png" alt="信息无障碍研究会"  class="logo"/></a></div>
    <!-- nav bar begin -->
    <div class="nav-bar">
        <!-- nav menu begin -->
        <ul>
            <li><a href="../index.html">首页</a></li>
            <li><a href="../index.html">返回</a></li>
        </ul>
        <!-- nav menu end -->
    </div>
    <!-- nav bar end -->
</div>
<!-- header end -->

<!-- body begin -->
<div class="body">
    <h3>去掉父试图添加点击监听之后的大焦点_____20160518</h3>
    <hr />
    <div>
        <h4>【问题描述】</h4>
        <hr />
        <p>当父视图添加了点击监听事件(OnClickListener)之后，父视图会获得焦点，父视图获得焦点的时候会朗读所有默认没有焦点的子控件的内容。而被朗读的子控件没有焦点了。导致用户很难理解界面内容。</p><!--问题说明-->
    </div>
    <div>
        <h4>【问题代码】</h4>
        <hr />
        <p>下面是MainActivity的布局文件：</p>
        <textarea rows="40" cols="120" aria-label="问题代码" id="code1">
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
	xmlns:android="http://schemas.android.com/apk/res/android"
	android:layout_width="match_parent"
	android:layout_height="match_parent"
	android:orientation="horizontal"
	android:id="@+id/content">

	<ImageView
		android:layout_width="0dp"
		android:layout_weight="2"
		android:layout_height="80dp"
		android:contentDescription="李白的头像"
		android:src="@drawable/libai"
		android:id="@+id/header"/>

	<LinearLayout
		android:layout_width="0dp"
		android:layout_weight="1"
		android:layout_height="wrap_content"
		android:orientation="vertical">

		<TextView
			android:id="@+id/name"
			android:layout_width="match_parent"
			android:layout_height="0dp"
			android:layout_weight="1"
			android:text="李白"/>

		<TextView
			android:id="@+id/description"
			android:layout_width="match_parent"
			android:layout_height="0dp"
			android:layout_weight="1"
			android:text="浪漫主义诗人"/>

	</LinearLayout>
</LinearLayout>
        </textarea><br/>
        <a href="#" id="copy_input1" class="copy">复制内容</a>
<p>下面是MainActivity.java的代码：</p>		
		<textarea rows="30" cols="120" aria-label="解决方案代码" id="code3">
package com.example.Accessibility;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {  

    @Override  
    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);
	findViewById(R.id.header).setOnClickListener(new View .OnClickListener() {
		@Override
		public void onClick(View v) {
			Toast.makeText(MainActivity.this, "更换头像", 			Toast.LENGTH_SHORT).show();
		}
	});

	//这里给父视图的LinearLayout添加了监听事件
	findViewById(R.id.content).setOnClickListener(new 		View.OnClickListener() {
			@Override
			public void onClick(View v) {
				Toast.makeText(MainActivity.this, "更换头像", 				Toast.LENGTH_SHORT).show();
			}
	});

	}
}
        </textarea><br/>
        <a href="#" id="copy_input3" class="copy">复制内容</a> 
    </div>
    <div>
        <h4>【问题解决方案描述】</h4>
        <hr />
        <p>把添加了点击监听事件的父视图内的默认没有焦点的控件添加上焦点，添加焦点的方法是android:focusable=”true”、android:focusableInTouchMode=”true”。</p>
    </div>
    <div>
        <h4>【解决方案】</h4>
        <hr />
		<p>下面是布局文件的代码，下面的代码给TextView利用android:focusable、android:focusableInTouchMode两个属性添加了焦点。</p>
        <textarea rows="40" cols="120" aria-label="解决方案代码" id="code2">
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
	xmlns:android="http://schemas.android.com/apk/res/android"
	android:layout_width="match_parent"
	android:layout_height="match_parent"
	android:orientation="horizontal"
	android:id="@+id/content">

	<ImageView
		android:layout_width="0dp"
		android:layout_weight="2"
		android:layout_height="80dp"
		android:contentDescription="李白的头像"
		android:src="@drawable/libai"
		android:id="@+id/header"/>

	<LinearLayout
		android:layout_width="0dp"
		android:layout_weight="1"
		android:layout_height="wrap_content"
		android:orientation="vertical">

		<TextView
			android:id="@+id/name"
			android:layout_width="match_parent"
			android:layout_height="0dp"
			android:layout_weight="1"
			android:text="李白"
			android:focusable="true"
			android:focusableInTouchMode="true"/>

		<TextView
			android:id="@+id/description"
			android:layout_width="match_parent"
			android:layout_height="0dp"
			android:layout_weight="1"
			android:text="浪漫主义诗人"
			android:focusable="true"
			android:focusableInTouchMode="true"/>

	</LinearLayout>
</LinearLayout>
        </textarea><br/>
        <a href="#" id="copy_input2" class="copy">复制内容</a> 
		
		<p>下面是MainActivity.java的代码：</p>
        <textarea rows="28" cols="120" aria-label="解决方案代码" id="code4">
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {  

    @Override  
    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);
	findViewById(R.id.header).setOnClickListener(new View .OnClickListener() {
		@Override
		public void onClick(View v) {
			Toast.makeText(MainActivity.this, "更换头像", 			Toast.LENGTH_SHORT).show();
	}
});

	//下面给父视图LinearLayout添加了点击监听事件
	findViewById(R.id.content).setOnClickListener(new View.OnClickListener() {
		@Override
		public void onClick(View v) {
			Toast.makeText(MainActivity.this, "更换头像", 			Toast.LENGTH_SHORT).show();
		}
	});

}
}
        </textarea><br/>
        <a href="#" id="copy_input4" class="copy">复制内容</a> 
		
    </div>
    <div>
        <h4>【前后效果图对比】</h4>
        <hr />
        <table>
            <tr>
                <td><img src="../images/25-1.png" class="litu" alt="" aria-labelledby="img1_label"/></td><td><img src="../images/25-2.png" class="litu" alt="" aria-labelledby="img2_label"/></td>
            </tr>
            <tr>
                <td id="img1_label">优化前，有一个大焦点，覆盖头像和文本，点击响应事件；</td><td id="img2_label">优化后，大焦点被屏蔽，头像、”李白“、”浪漫主义诗人“点击响应事件；</td>
            </tr>
        </table>
    </div>
    <div>
        <h4>【扩展】</h4>
        <hr />
        <p></p>
    </div>
    <div>
        <h4>【更多】</h4>
        <hr />
        <ol></ol>
    </div>
</div>
<!-- body end -->

<!-- footer begin -->
<div class="footer">
</div>
<!-- footer end -->
</div>
<!-- wrap end -->
</body>
</html>
