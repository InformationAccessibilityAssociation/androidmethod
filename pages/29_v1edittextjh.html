<!DOCTYPE html>

<html lang="zh-CN">
<head>
<title>因应用程序最低版本为1导致的EditText无法激活的解决方案</title>
<link rel="stylesheet" href="../style.css" />
<meta charset="utf-8">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.zclip.min.js"></script>
<script type="text/javascript">
$(function(){ 
    $('#copy_input1').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code1').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 
$(function(){ 
    $('#copy_input2').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code2').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 
$(function(){ 
    $('#copy_input3').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code3').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 

$(function(){ 
    $('#copy_input4').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code4').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 

</script>
</head>
<body>
<div class="wrap">
<!-- header begin -->
<div class="header">
    <div ><a href="http://www.siaa.org.cn/"><img src="../logo.png" alt="信息无障碍研究会"  class="logo"/></a></div>
    <!-- nav bar begin -->
    <div class="nav-bar">
        <!-- nav menu begin -->
        <ul>
           <li><a href="../index.html">首页</a></li>
            <li><a href="../index.html">返回</a></li>
        </ul>
        <!-- nav menu end -->
    </div>
    <!-- nav bar end -->
</div>
<!-- header end -->

<!-- body begin -->
<div class="body">
    <h3>因应用程序最低版本为1导致的EditText无法激活的解决方案_____20160523</h3>
    <hr />
    <div>
        <h4>【问题描述】</h4>
        <hr />
        <p>当用户开启屏幕阅读器的时候用滑动或触摸浏览到EditText（编辑框）单指双击激活此编辑框，会发生单击下面的编辑框激活的却是上面的编辑框，如此解决方案中单击电话号码编辑框激活的却是生日编辑框，在此代码中的年龄、生日编辑框也不能正确响应。
		注：此问题发现时的情况是：<br/>
1）、导入一个工程，此工程的manifest.xml中没有<uses-sdk>元素；<br/>
2）、此工程原来是android studio的工程；<br/>
3）、整个界面在垂直方向上有多个编辑框（详见下面的代码）；
</p><!--问题说明-->
    </div>
    <div>
        <h4>【问题代码】</h4>
        <hr />
        <p>下面是manifest.xml的代码，注意此代码中没有<uses-sdk>元素，没有此元素默认最低版本。
注：下面的代码的问题是单击年龄、生日、电话号码编辑框都不能正常激活，激活的是上一个编辑框。注：android:minSdkVersion为1。</p>
        <textarea rows="20" cols="120" aria-label="问题代码1" id="code1">
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.crazyit.ui" >
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
</textarea><br/>
 <a href="#" id="copy_input1" class="copy">复制内容
<p>下面是布局文件的代码</p>
<textarea rows="71" cols="120" aria-label="问题代码2" id="code3">
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
	android:layout_width="match_parent"
	android:layout_height="match_parent"
	android:stretchColumns="1">
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="用户名:"
			android:textSize="16sp"/>
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:hint="请填写登录账号"
			android:selectAllOnFocus="true"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="密码:"
			android:textSize="16sp"/>
		<!-- android:inputType="numberPassword"表明只能接受数字密码 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="numberPassword"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="年龄："
			android:textSize="16sp"/>
		<!-- inputType="number"表明是数值输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="number"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="生日："
			android:textSize="16sp"/>
		<!-- inputType="date"表明是日期输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="date"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="电话号码:"
			android:textSize="16sp"/>
		<!-- inputType="phone"表明是输入电话号码的输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:hint="请填写您的电话号码"
			android:selectAllOnFocus="true"
			android:inputType="phone"/>
	</TableRow>
	<Button
		android:layout_width="wrap_content"
		android:layout_height="wrap_content"
		android:text="注册"/>
</TableLayout>
       </textarea><br/> 
        <a href="#" id="copy_input3" class="copy">复制内容</a> 
    </div>
    <div>
        <h4>【问题解决方案描述】</h4>
        <hr />
        <p>Android官方文档《Android指南：无障碍》（《Android guide: Accessibility>》中说对无障碍的支持是从Android1.6 （api版本4）正式开始的，所以最低版本设置为1会出现无障碍问题，建议把最低版本设置为4。</p>
    </div>
    <div>
        <h4>【解决方案】</h4>
        <hr />
		<p>下面是manifest.xml的代码，此代码中添加了<uses-sdk>元素并把最低版本
注：在manifest中添加最低版本之后编辑框能正常响应。(android:minSdkVersion）设置为4。</p>
        <textarea rows="20" cols="120" aria-label="解决方案代码1" id="code2">
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.crazyit.ui" >
<uses-sdk
android:minSdkVersion="4"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
</textarea><br/> 
        <a href="#" id="copy_input2" class="copy">复制内容</a> 
<p>下面是布局文件的代码:</p>
<textarea rows="72" cols="120" aria-label="解决方案代码2" id="code4">
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
	android:layout_width="match_parent"
	android:layout_height="match_parent"
	android:stretchColumns="1">
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="用户名:"
			android:textSize="16sp"/>
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:hint="请填写登录账号"
			android:selectAllOnFocus="true"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="密码:"
			android:textSize="16sp"/>
		<!-- android:inputType="numberPassword"表明只能接受数字密码 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="numberPassword"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="年龄："
			android:textSize="16sp"/>
		<!-- inputType="number"表明是数值输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="number"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="生日："
			android:textSize="16sp"/>
		<!-- inputType="date"表明是日期输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:inputType="date"/>
	</TableRow>
	<TableRow>
		<TextView
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:text="电话号码:"
			android:textSize="16sp"/>
		<!-- inputType="phone"表明是输入电话号码的输入框 -->
		<EditText
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:hint="请填写您的电话号码"
			android:selectAllOnFocus="true"
			android:inputType="phone"/>
	</TableRow>
	<Button
		android:layout_width="wrap_content"
		android:layout_height="wrap_content"
		android:text="注册"/>
</TableLayout>

        </textarea><br/>
        <a href="#" id="copy_input4" class="copy">复制内容</a> 
    </div>
    <div>
        <h4>【前后效果图对比】</h4>
        <hr />
        <table>
            <tr>
                <td><img src="../images/29-1.png" class="litu" alt="" aria-labelledby="img1_label"/></td><td><img src="../images/29-2.png" class="litu" alt="" aria-labelledby="img2_label"/></td>
            </tr>
            <tr>
                <td id="img1_label">优化前，聚焦“电话号码”的编辑框，点击，“生日”编辑框被激活，如图所示；</td><td id="img2_label">优化后，聚焦“电话号码”的编辑框，点击，“电话号码”编辑框被激活，如图所示；</td>
            </tr>
        </table>
    </div>
    <div>
        <h4>【扩展】</h4>
        <hr />
        <p></p>
    </div>
    <div>
        <h4>【更多】</h4>
        <hr />
        <ol></ol>
    </div>
</div>
<!-- body end -->

<!-- footer begin -->
<div class="footer">
</div>
<!-- footer end -->
</div>
<!-- wrap end -->
</body>
</html>
