<!DOCTYPE html>

<html lang="zh-CN">
<head>
<title>设置控件焦点导航的顺序</title>
<link rel="stylesheet" href="../style.css" />
<meta charset="utf-8">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.zclip.min.js"></script>
<script type="text/javascript">
$(function(){ 
    $('#copy_input1').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code1').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 
$(function(){ 
    $('#copy_input2').zclip({ 
        path: 'js/ZeroClipboard.swf', 
        copy: function(){//复制内容 
            return $('#code2').val(); 
        }, 
        afterCopy: function(){//复制成功 
            $("<span id='msg'/>").insertAfter($('#copy_input')).text('复制成功'); 
        } 
    }); 
}); 
</script>
</head>
<body>
<div class="wrap">
<!-- header begin -->
<div class="header">
    <div ><a href="http://www.siaa.org.cn/"><img src="../logo.png" alt="信息无障碍研究会"  class="logo"/></a></div>
    <!-- nav bar begin -->
    <div class="nav-bar">
        <!-- nav menu begin -->
        <ul>
            <li><a href="../index.html">首页</a></li>
            <li><a href="../index.html">返回</a></li>
        </ul>
        <!-- nav menu end -->
    </div>
    <!-- nav bar end -->
</div>
<!-- header end -->

<!-- body begin -->
<div class="body">
    <h3>设置控件焦点导航的顺序____20160510</h3>
    <hr />
    <div>
        <h4>【问题描述】</h4>
        <hr />
        <p>用户使用焦点导航的时候，焦点是通过从一个控件传递到另一个控件，这由焦点命令来确定其指向。焦点移动命令是根据一种算法，意在在某一特定方向上寻找相邻的元素。在极少数情况下，默认的算法可能不匹配具体的命令，从而不符合你的用户界面。这个算法是从左到右、从上到下的进行焦点导航的。有时候这种默认的焦点导航顺序会让利用焦点导航的用户无法理解视图界面，例如界面上利用按钮布局成一个时钟，按照默认的焦点导航这个时钟会导航的很混乱。</p><!--问题说明-->
    </div>
    <div>
        <h4>【问题代码】</h4>
        <hr />
        <p>下面的代码会按照默认算法进行焦点导航。这让用户很难理解。注：下面代码中使用的style/clockFaceNum文件请看“<a href="#fu">附1</a>”:</p>
        <textarea rows="90" cols="120" aria-label="问题代码" id="code1">
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <Button
        style="@style/clockFaceNum"
        android:text="12"
        android:id="@+id/button12"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="11"
        android:id="@+id/button11"
        android:layout_below="@+id/button12"
        android:layout_toLeftOf="@+id/button12">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="1"
        android:id="@+id/button1"
        android:layout_below="@+id/button12"
        android:layout_toRightOf="@+id/button12">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="10"
        android:id="@+id/button10"
        android:layout_below="@+id/button11"
        android:layout_toLeftOf="@+id/button11">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="2"
        android:id="@+id/button2"
        android:layout_below="@+id/button1"
        android:layout_toRightOf="@+id/button1">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="9"
        android:id="@+id/button9"
        android:layout_below="@+id/button10"
        android:layout_toLeftOf="@+id/button10">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="3"
        android:id="@+id/button3"
        android:layout_below="@+id/button2"
        android:layout_toRightOf="@+id/button2">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="8"
        android:id="@+id/button8"
        android:layout_below="@+id/button9"
        android:layout_toRightOf="@+id/button9">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="4"
        android:id="@+id/button4"
        android:layout_below="@+id/button3"
        android:layout_toLeftOf="@+id/button3">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="7"
        android:id="@+id/button7"
        android:layout_below="@+id/button8"
        android:layout_toRightOf="@+id/button8">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="5"
        android:id="@+id/button5"
        android:layout_below="@+id/button4"
        android:layout_toLeftOf="@+id/button4">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="6"
        android:id="@+id/button6"
        android:layout_below="@+id/button5"
        android:layout_centerHorizontal="true">
    </Button>
</RelativeLayout>
        </textarea><br/>
        <a href="#" id="copy_input1" class="copy">复制内容</a> 
    </div>
    <div>
        <h4>【问题解决方案描述】</h4>
        <hr />
        <p>当焦点顺序不符合需要的时候可以用xml属性和代码进行修改。修改焦点顺序的xml属性有： android:nextFocusDown、android:nextFocusUp、android:nextFocusLeft、android:nextFocusRight；在代码中可以使用setNextFocusDownId()、setNextFocusUpId()、setNextFocusLeftId()、setNextFocusRight()。这4个属性、方法分别控制上、下、左、右方向的下一个焦点的控件。属性和方法提供的值都是下一个控件的id。
注：此解决方案针对焦点导航的设备的焦点顺序有效，如键盘，d-pad导航，轨迹球等，对于触摸屏导航的焦点不一定有效。</p>
    </div>
    <div>
        <h4>【解决方案】</h4>
		<p>下面的代码重新设置了焦点导航的顺序。下面代码达到的效果是按右方向键和下方向键会顺时针浏览界面上的按钮，按左方向键、上方向键会逆时针浏览界面上的按钮；</p>
        <hr />
        <textarea rows="138" cols="120" aria-label="解决方案代码" id="code2">
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <Button
        style="@style/clockFaceNum"
        android:text="12"
        android:id="@+id/button12"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
	android:nextFocusDown="@+id/button1"
	android:nextFocusRight="@+id/button1"
	android:nextFocusUp="@+id/button11"
	android:nextFocusLeft="@+id/button11">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="11"
        android:id="@+id/button11"
        android:layout_below="@+id/button12"
        android:layout_toLeftOf="@+id/button12"
        android:nextFocusDown="@+id/button12"
	android:nextFocusRight="@+id/button12"
	android:nextFocusUp="@+id/button10"
	android:nextFocusLeft="@+id/button10">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="1"
        android:id="@+id/button1"
        android:layout_below="@+id/button12"
        android:layout_toRightOf="@+id/button12"
        android:nextFocusDown="@+id/button2"
	android:nextFocusRight="@+id/button2"
	android:nextFocusUp="@+id/button12"
	android:nextFocusLeft="@+id/button12">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="10"
        android:id="@+id/button10"
        android:layout_below="@+id/button11"
        android:layout_toLeftOf="@+id/button11"
        android:nextFocusDown="@+id/button11"
	android:nextFocusRight="@+id/button11"
	android:nextFocusUp="@+id/button9"
	android:nextFocusLeft="@+id/button9">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="2"
        android:id="@+id/button2"
        android:layout_below="@+id/button1"
        android:layout_toRightOf="@+id/button1"
        android:nextFocusDown="@+id/button3"
	android:nextFocusRight="@+id/button3"
	android:nextFocusUp="@+id/button1"
	android:nextFocusLeft="@+id/button1">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="9"
        android:id="@+id/button9"
        android:layout_below="@+id/button10"
        android:layout_toLeftOf="@+id/button10"
        android:nextFocusDown="@+id/button10"
	android:nextFocusRight="@+id/button10"
	android:nextFocusUp="@+id/button8"
	android:nextFocusLeft="@+id/button8">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="3"
        android:id="@+id/button3"
        android:layout_below="@+id/button2"
        android:layout_toRightOf="@+id/button2"
        android:nextFocusDown="@+id/button4"
	android:nextFocusRight="@+id/button4"
	android:nextFocusUp="@+id/button2"
	android:nextFocusLeft="@+id/button2">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="8"
        android:id="@+id/button8"
        android:layout_below="@+id/button9"
        android:layout_toRightOf="@+id/button9"
        android:nextFocusDown="@+id/button9"
	android:nextFocusRight="@+id/button9"
	android:nextFocusUp="@+id/button7"
	android:nextFocusLeft="@+id/button7">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="4"
        android:id="@+id/button4"
        android:layout_below="@+id/button3"
        android:layout_toLeftOf="@+id/button3"
        android:nextFocusDown="@+id/button5"
	android:nextFocusRight="@+id/button5"
	android:nextFocusUp="@+id/button3"
	android:nextFocusLeft="@+id/button3">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="7"
        android:id="@+id/button7"
        android:layout_below="@+id/button8"
        android:layout_toRightOf="@+id/button8"
        android:nextFocusDown="@+id/button8"
	android:nextFocusRight="@+id/button8"
	android:nextFocusUp="@+id/button6"
	android:nextFocusLeft="@+id/button6">
	</Button>
    <Button
        style="@style/clockFaceNum"
        android:text="5"
        android:id="@+id/button5"
        android:layout_below="@+id/button4"
        android:layout_toLeftOf="@+id/button4"
        android:nextFocusDown="@+id/button6"
	android:nextFocusRight="@+id/button6"
	android:nextFocusUp="@+id/button4"
	android:nextFocusLeft="@+id/button4">
    </Button>
    <Button
        style="@style/clockFaceNum"
        android:text="6"
        android:id="@+id/button6"
        android:layout_below="@+id/button5"
        android:layout_centerHorizontal="true"
        android:nextFocusDown="@+id/button7"
	android:nextFocusRight="@+id/button7"
	android:nextFocusUp="@+id/button5"
	android:nextFocusLeft="@+id/button5">
    </Button>
</RelativeLayout>
        </textarea><br/>
        <a href="#" id="copy_input2" class="copy">复制内容</a> 
    </div>
    <div>
        <h4>【前后效果图对比】</h4>
        <hr />
        <table>
            <tr>
                <td><img src="../images/20-1.png" class="litu" alt="" aria-labelledby="img1_label"/></td><td><img src="../images/20-1.png" class="litu" alt="" aria-labelledby="img2_label"/></td>
            </tr>
            <tr>
                <td id="img1_label">优化前，键盘焦点顺序为：12-11-1-10-2-9-3-8-4-7-5-6；</td><td id="img2_label">优化后，键盘焦点顺序为：12-1-2-3-4-5-6-7-8-9-10-11-12；</td>
            </tr>
        </table>
    </div>
    <div>
        <h4>【扩展】</h4>
        <hr />
        <p></p>
    </div>
    <div>
        <h4>【更多】</h4>
        <hr />
        <p>【附1】 style/clockFaceNum文件</p>
		<textarea rows="20" cols="120">
&lt;resources&gt;
    &lt;style
        name="clockFaceNum"&gt;
        &lt;item
            name="android:layout_width"&gt;38dp&lt;/item&gt;
        &lt;item
            name="android:layout_height"&gt;38dp&lt;/item&gt;
	&lt;!--
        &lt;item
            name="android:onClick"&gt;numClicked&lt;/item&gt;
	--&gt;
        &lt;item
            name="android:textSize"&gt;9sp&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;

</textarea>
    </div>
</div>
<!-- body end -->

<!-- footer begin -->
<div class="footer">
</div>
<!-- footer end -->
</div>
<!-- wrap end -->
</body>
</html>
